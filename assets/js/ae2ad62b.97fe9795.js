(self.webpackChunkdocs_v_2=self.webpackChunkdocs_v_2||[]).push([[2992],{88770:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var l=t(67294),r=t(87536),n=t(31010);const i={flagContainer:"flagContainer_wy3i"};var s=t(87462),c=t(86010);const o={editorInputContainer:"editorInputContainer_jqCm",editorCut:"editorCut_Erbg",error:"error_AEli",editorPlaceholder:"editorPlaceholder_MvV8",editorInput:"editorInput_WHYK",errorMessage:"errorMessage_K08I"};var m=t(32866),u=t(45697),d=t.n(u);function v(e){let{label:a,displayText:t,className:n,required:i,type:u,validation:d,defaultValue:v,disablePlaceholder:g=!1,disableInlineErr:f=!1}=e;const{register:E}=(0,r.Gc)();return l.createElement("div",{className:(0,c.Z)(n||o.editorInputContainer)},l.createElement("input",(0,s.Z)({id:`${a}.input`,defaultValue:v,className:o.editorInput,type:"number"===u?"number":"text",placeholder:" "},E(a,{required:{value:i,message:"This field is required"},...d}))),g&&l.createElement("span",null,t),l.createElement("div",{className:o.editorCut}),l.createElement("label",{htmlFor:`${a}.input`,className:(0,c.Z)(o.editorPlaceholder)},t),!f&&l.createElement(m.B,{name:a,render:p}))}function p(e){let{message:a}=e;return l.createElement("div",{className:o.errorMessage},a)}v.propTypes={label:d().string.isRequired,displayText:d().string,className:d().string,required:d().bool,type:d().string,validation:d().object,defaultValue:d().any,disablePlaceholder:d().bool,disableInlineErr:d().bool};const g={container:"container_JzDm",switch:"switch_G9oQ",r:"r_b74C",layer:"layer_jPCr",knobs:"knobs_MQYY",checkbox:"checkbox_UUwg",displayText:"displayText_acVt"};function f(e){let{label:a,displayText:t,defaultChecked:n=!1}=e;const{register:i}=(0,r.Gc)();return l.createElement("div",{className:g.container},l.createElement("div",{className:(0,c.Z)(g.displayText)},t),l.createElement("div",null,l.createElement("div",{className:(0,c.Z)(g.switch,g.r)},l.createElement("input",(0,s.Z)({type:"checkbox",className:g.checkbox},i(a),{defaultChecked:n})),l.createElement("div",{className:g.knobs}),l.createElement("div",{className:g.layer}))))}f.propTypes={label:d().string.isRequired,displayText:d().string,defaultChecked:d().bool};const E={selector:"selector_zSAl"};function b(e){let{title:a,content:t,label:n,required:i}=e;const{register:c}=(0,r.Gc)();return l.createElement("div",{className:E.selector},l.createElement("select",(0,s.Z)({defaultValue:"0"},c(n,i)),l.createElement("option",{disabled:!0,defaultChecked:!0,value:null},a),t.map(((e,a)=>l.createElement("option",{value:e.value,key:`variation_type_${e.value}_${e.displayText}`},e.displayName)))))}b.propTypes={title:d().string,content:d().array,label:d().string.isRequired,required:d().bool};const N={buttonPlus:"buttonPlus_vxig",bg:"bg_ZMMU",variation:"variation_m8Hn",icons:"icons_NekN",icon:"icon_PBCB",targeting:"targeting_UFjj"};var y=t(55417),h=t(92949);const _={container:"container_SLwd"};function k(e){let{label:a}=e;const{register:t}=(0,r.Gc)(),{colorMode:n}=(0,h.I)(),{onChange:i,onBlur:s,name:c,ref:o}=t(`${a}.value`);return l.createElement("div",{className:_.container,"data-color-mode":n},l.createElement(y.Z,{value:"",language:"json",placeholder:" Please enter JSON.",padding:7,className:_.container,onChange:i,onBlur:s,name:c,ref:o,style:{fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}}))}k.propTypes={label:d().string.isRequired};const $=["\ud83d\udfe2","\ud83d\udfe0","\ud83d\udd34","\ud83d\udfe3","\u26aa\ufe0f","\ud83d\udd35","\u26ab\ufe0f","\ud83d\udfe1","\ud83d\udfe4"];function x(e){let{type:a,label:t}=e;const{control:n}=(0,r.Gc)(),{fields:i,append:s,remove:o}=(0,r.Dq)({control:n,name:t,rules:{minLength:1}}),m=e=>o(e);return l.createElement("div",null,l.createElement("h2",null,"Variations"),l.createElement("div",{className:"grid grid-pad"},i.map(((e,r)=>l.createElement(q,{type:a,key:e.id,label:`${t}.${r}`,index:r,remove:m,icon:$[r%$.length]})))),l.createElement("button",{className:N.buttonPlus,onMouseDown:()=>s({})},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,c.Z)("fa-solid fa-circle fa-stack-2x",N.bg)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"}))))}function q(e){let{type:a,label:t,remove:n,index:i,icon:s}=e;const{register:o}=(0,r.Gc)();return l.createElement("div",{className:N.variation},l.createElement("div",{className:(0,c.Z)("col-4-12 mobile-col-5-12",N.icons)},l.createElement("div",{className:N.icon},s),l.createElement(v,{displayText:"Name",label:`${t}.name`,register:o,required:!0})),l.createElement("div",{className:(0,c.Z)("col-6-12 mobile-col-7-12")},((e,a,t)=>e&&"JSON"===e.toUpperCase()?l.createElement(k,{register:t,required:!0,label:a}):l.createElement(v,{displayText:"Flag Value",label:a,register:t,type:e,required:!0}))(a,t+".value",o)),l.createElement("div",{className:"col-1-12 mobile-col-1-12"},l.createElement("button",{className:N.buttonPlus,onMouseDown:e=>{e.preventDefault(),n(i)}},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,c.Z)("fa-solid fa-circle fa-stack-2x",N.bg)}),l.createElement("i",{className:"fa-solid fa-minus fa-stack-1x fa-inverse"})))))}x.propTypes={type:d().string,label:d().string.isRequired},q.propTypes={type:d().string,label:d().string.isRequired,remove:d().func.isRequired,index:d().number.isRequired,icon:d().string};const T={ruleContainer:"ruleContainer__VKe",ruleName:"ruleName_UKzC",circle:"circle_Gmme",inputQuery:"inputQuery_ajTA",ifContainer:"ifContainer_dti2",serveTitle:"serveTitle_zpaJ",serve:"serve_AhaS",percentageInput:"percentageInput_tEMG",dateInput:"dateInput_aE4X",percentageContainer:"percentageContainer_Mre8",error:"error_izBb",rolloutDesc:"rolloutDesc_kHMj",progressiveRollout:"progressiveRollout_x7nm",progressiveRolloutPercentage:"progressiveRolloutPercentage_qZik",formError:"formError_TtL5"};var C=t(39960),V=(t(61061),t(72933)),w=t(92305);function R(e){let{variations:a,label:t,selectedVar:n=""}=e;const{register:i,watch:o}=(0,r.Gc)();return"percentage"!==n?null:l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:(0,c.Z)("col-1-1",T.rolloutDesc)},"A percentage rollout means that your users are divided in different buckets and you serve different variations to them. Note that a user will always have the same variation."),l.createElement("div",{className:"col-1-2"},l.createElement("ul",{className:T.percentageContainer},a.map(((e,a)=>l.createElement("li",{key:`${t}.${e.name}`},l.createElement(v,{label:`${t}.${a}.value`,required:!0,defaultValue:0,type:"number",displayText:`%  ${$[a%$.length]} ${e.name}`,className:T.percentageInput,disablePlaceholder:!0,disableInlineErr:!0,validation:{valueAsNumber:!0,required:{value:!0,message:"Percentage field is required"},min:{value:0,message:"Percentage should be between 0 and 100"},max:{value:100,message:"Percentage should be between 0 and 100"}}}),l.createElement("input",(0,s.Z)({type:"hidden"},i(`${t}.${a}.name`),{value:e.name})))))),l.createElement(Z,{percentages:o(t)})))}function Z(e){let{percentages:a}=e;if(!a||!(0,V.isArray)(a)||a.length<=0)return null;const t=a.filter((e=>e&&!isNaN(e.value))).reduce(((e,a)=>e+a.value),0);return t>100?l.createElement("div",{className:T.error},"The total percentage cannot be more than 100%"):l.createElement(w.Progress,{percent:t})}R.propTypes={variations:d().array,label:d().string.isRequired,selectedVar:d().string},Z.propTypes={percentages:d().array};var D=t(96486),P=t.n(D),F=t(9198),I=t.n(F);function S(e){let{name:a,initialValue:t,label:n,variations:i,defaultDate:s}=e;const{register:o,control:m,formState:{errors:u}}=(0,r.Gc)();return l.createElement("div",null,l.createElement("div",{className:(0,c.Z)("grid",T.progressiveRollout)},l.createElement("div",null,a),l.createElement("div",null,l.createElement(r.Qr,{control:m,name:`${n}.date`,defaultValue:s,rules:{required:{value:!0,message:"Date field is required"}},render:e=>{let{field:a}=e;return l.createElement(I(),{className:T.dateInput,placeholderText:"Select date",showTimeSelect:!0,onChange:e=>a.onChange(e),selected:a.value,dateFormat:"Pp"})}})),l.createElement("div",null,"and serve"),l.createElement("div",null,l.createElement(b,{title:"Variation",content:i.map(((e,a)=>({value:e.name,displayName:`${$[a%$.length]} ${e.name}`}))).filter((e=>void 0!==e.value&&""!==e.value))||[],register:o,label:`${n}.selectedVar`,required:!0})),l.createElement("div",{className:T.progressiveRolloutPercentage},"to\xa0",l.createElement(v,{label:`${n}.percentage`,required:!0,defaultValue:t,type:"number",displayText:"%",className:T.percentageInput,disablePlaceholder:!0,disableInlineErr:!0,validation:{valueAsNumber:!0,min:{value:0,message:"Percentage should be between 0 and 100"},max:{value:100,message:"Percentage should be between 0 and 100"}}})),l.createElement("div",null,l.createElement(C.Z,{to:"/docs/configure_flag/rollout/progressive",target:"_blank"},l.createElement("i",{className:"fa-regular fa-circle-question"})))),l.createElement("div",null,l.createElement(M,{errors:u,label:n})))}function M(e,a){const t=P().get(e,a);return P().isNil(t)?null:l.createElement("ul",{className:T.formError},Object.keys(t).map((e=>l.createElement("li",{key:e},t[e].message))))}function G(e){let{variations:a,label:t,selectedVar:r}=e;if("progressive"!==r)return null;let n=new Date;return n=n.setDate(n.getDate()+10),l.createElement("div",{className:"grid grid-pad"},l.createElement("div",{className:(0,c.Z)("col-1-1",T.rolloutDesc)},"A progressive rollout allows you to increase the percentage of your flag over time.",l.createElement("br",null),"You can select a release ramp where the percentage of your flag will increase progressively between the start date and the end date."),l.createElement(S,{name:"Start on the",label:`${t}.initial`,variations:a,initialValue:0,defaultDate:new Date}),l.createElement(S,{name:"Stop on the",label:`${t}.end`,variations:a,initialValue:100,defaultDate:new Date(n)}))}function O(e){let{variations:a,label:t,isDefaultRule:n}=e;const{register:i,watch:s}=(0,r.Gc)(),m=[{value:"percentage",displayName:"\ufe0f\u2197\ufe0f a percentage rollout"},{value:"progressive",displayName:"\u2197\ufe0f a progressive rollout"}];return l.createElement("div",{className:(0,c.Z)("grid-pad grid",T.ruleContainer)},!n&&l.createElement("div",{className:"col-1-1"},l.createElement("div",{className:"content"},l.createElement(v,{label:`${t}.name`,displayText:"Rule name",className:(0,c.Z)(o.editorInputContainer,T.ruleName),required:!0}))),!n&&l.createElement("div",{className:(0,c.Z)("grid")},l.createElement("div",{className:"col-9-12"},l.createElement("div",{className:(0,c.Z)("content",T.inputQuery)},l.createElement("div",{className:T.ifContainer},l.createElement("div",{className:(0,c.Z)(T.circle)},"IF")),l.createElement(v,{label:`${t}.query`,displayText:"Query",required:!0}),l.createElement(C.Z,{to:"/docs/configure_flag/rule_format",target:"_blank"},l.createElement("i",{className:"fa-regular fa-circle-question"}))))),l.createElement("div",{className:"col-5-12"},l.createElement("div",{className:(0,c.Z)("content",T.serve)},l.createElement("div",{className:T.serveTitle},"Serve"),l.createElement(b,{title:"Variation",content:function(e){const a=function(e){return e.map(((e,a)=>({value:e.name,displayName:`${$[a%$.length]} ${e.name}`}))).filter((e=>void 0!==e.value&&""!==e.value))||[]}(e);return a.length>=2?[...a,...m]:a}(a),register:i,label:`${t}.selectedVar`,required:!0}))),l.createElement("div",{className:"col-1-1"},l.createElement(R,{selectedVar:s(`${t}.selectedVar`),variations:a,label:`${t}.percentages`}),l.createElement(G,{selectedVar:s(`${t}.selectedVar`),variations:a,label:`${t}.progressive`})))}S.propTypes={name:d().string,initialValue:d().number,label:d().string.isRequired,variations:d().array,defaultDate:d().any},G.propTypes={variations:d().array,label:d().string.isRequired,selectedVar:d().string},O.propTypes={variations:d().array,label:d().string.isRequired,isDefaultRule:d().bool};const j={button:"button_Kroe",bg:"bg_rAJd",targeting:"targeting_TgyP",variation:"variation_eQWz",icons:"icons_PYIv",icon:"icon_fDeV"};function A(e){let{label:a,variations:t}=e;const{control:n}=(0,r.Gc)(),{fields:i,append:s,remove:o}=(0,r.Dq)({control:n,name:a}),m=e=>o(e);return l.createElement("div",null,l.createElement("h2",null,"Target specific users"),i.length<=0&&l.createElement("div",null,"Add Rule"),i.map(((e,r)=>l.createElement("div",{key:e.id,className:(0,c.Z)(j.targeting)},l.createElement(O,{variations:t,label:`${a}.${r}`,isDefaultRule:!1}),l.createElement("button",{className:j.button,onMouseDown:m},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,c.Z)("fa-solid fa-circle fa-stack-2x",j.bg)}),l.createElement("i",{className:"fa-solid fa-xmark fa-stack-1x fa-inverse"})))))),l.createElement("button",{className:j.button,onMouseDown:()=>s({name:`Rule ${i.length+1}`})},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,c.Z)("fa-solid fa-circle fa-stack-2x",j.bg)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"}))))}function J(e){let{label:a}=e;const{watch:t}=(0,r.Gc)();return l.createElement("div",{className:i.flagContainer},l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:"col-6-12 mobile-col-1-2"},l.createElement(v,{displayText:"Flag Name",label:`${a}.flagName`,required:!0})),l.createElement("div",{className:"col-3-12 mobile-col-1-2"},l.createElement(f,{id:"disable",label:`${a}.disable`,displayText:"Disable"})),l.createElement("div",{className:"col-3-12 mobile-col-1-2"},l.createElement(f,{id:"disable",label:`${a}.trackEvents`,displayText:"Track event",defaultChecked:!0}))),l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:(0,c.Z)("col-3-12 mobile-col-1-2")},l.createElement(b,{title:"Flag type",content:[{value:"boolean",displayName:"\u2611\ufe0f boolean"},{value:"string",displayName:"\ud83d\udd24 string"},{value:"number",displayName:"\ud83d\udd22 number"},{value:"json",displayName:"\ud83d\udda5 JSON"}],label:`${a}.type`,required:!0})),l.createElement("div",{className:(0,c.Z)("col-1-12","mobile-col-1-1")}),l.createElement("div",{className:"col-2-12 mobile-col-1-2"},l.createElement(v,{id:"version",label:`${a}.version`,displayText:"Version"}))),l.createElement(x,{label:`${a}.variations`,type:t(`${a}.type`)}),l.createElement(A,{label:`${a}.targeting`,variations:t(`${a}.variations`)}),l.createElement("div",null,l.createElement("h2",null,"Default"),l.createElement(O,{label:`${a}.defaultRule`,variations:t(`${a}.variations`),isDefaultRule:!0})))}A.propTypes={label:d().string.isRequired,variations:d().array},J.propTypes={label:d().string.isRequired};var L=t(53951),Q=t(38388),Y=t(5022);const z={invalidForm:"invalidForm_J4Lp",space:"space_Hu3V"};function B(e){function a(e,a){switch(a){case"json":try{return JSON.parse(e.value)}catch(t){return}case"number":return Number(e)||void 0;case"boolean":return"boolean"==typeof e?e:void 0!==e&&("string"==typeof e||e instanceof String)&&"true"===e.toLowerCase();default:return String(e)||void 0}}function t(e){let a,t,l;const{selectedVar:r}=e;switch(r){case"percentage":t={},e.percentages.forEach((e=>t[e.name]=e.value));break;case"progressive":l={initial:{variation:e.progressive.initial.selectedVar,percentage:e.progressive.initial.percentage||0,date:e.progressive.initial.date},end:{variation:e.progressive.end.selectedVar,percentage:e.progressive.end.percentage||100,date:e.progressive.end.date}};break;default:a=r}return{name:e.name||void 0,query:e.query,variation:a,percentage:t,progressiveRollout:l}}const l={};return e.GOFeatureFlagEditor.filter((e=>void 0!==e.flagName&&""!==e.flagName)).forEach((e=>l[e.flagName]=function(e){const l=e.type,r={};e.variations.filter((e=>void 0!==e.name&&""!==e.name&&void 0!==e.value&&""!==e.value)).forEach((e=>r[e.name]=a(e.value,l)));const n=e.targeting.map((e=>t(e))),i=a(e.trackEvents,"boolean"),s=a(e.disable,"boolean"),c=t(e.defaultRule);return{variations:r,disable:s||void 0,trackEvents:i?void 0:i,version:""===e.version?void 0:e.version,targeting:n.length>0?n:void 0,defaultRule:c}}(e))),l}function U(){return l.createElement("div",{className:z.invalidForm},"Error in your configuration, please review the form.")}function K(){const{watch:e,formState:{errors:a}}=(0,r.Gc)(),t=e(),n=a&&0===Object.keys(a).length&&Object.getPrototypeOf(a)===Object.prototype;return l.createElement("div",{className:"col-4-12"},!n&&l.createElement(U,null),n&&l.createElement(b,{title:"Format",content:[{value:"yaml",displayName:"YAML"},{value:"json",displayName:"JSON"},{value:"toml",displayName:"TOML"}],required:!1,label:"flagFormat"}),l.createElement("div",{className:z.space}),n&&l.createElement(L.default,{className:"JSON"},function(e,a){switch(a){case"json":return JSON.stringify(e,null,2);case"toml":return Y.stringify(e);default:return Q.default.stringify(e,null,2)}}(B(t),t.flagFormat)))}function H(){const e="GOFeatureFlagEditor",a=(0,r.cI)({mode:"onChange",defaultValues:{GOFeatureFlagEditor:[{flagName:"my-first-flag",variations:[{name:"Variation_1",value:!0},{name:"Variation_2",value:!1}],targeting:[],defaultRule:{}}]}}),{fields:t,append:n}=(0,r.Dq)({control:a.control,name:e,rules:{minLength:1}});return l.createElement("div",{className:"grid-pad grid"},l.createElement(r.RV,a,l.createElement("div",{className:"col-8-12"},l.createElement("form",{onSubmit:a.handleSubmit((e=>{e.preventDefault()}))},t.map(((a,t)=>l.createElement(J,{label:`${e}.${t}`,key:a.id}))),l.createElement("button",{className:j.button,onClick:e=>{e.preventDefault(),n({flagName:`new-flag-${t.length}`,variations:[{name:"Variation_1",value:!0},{name:"Variation_2",value:!1}],targeting:[],defaultRule:{}})}},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,c.Z)("fa-solid fa-circle fa-stack-2x",j.bg)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"})),"Add another flag"))),l.createElement(K,null)))}function W(){return l.createElement(n.Z,{title:"Edit Your Flag",description:"GO Feature Flag editor is the simplest way to configure your feature flags."},l.createElement(H,null))}},15101:()=>{},42116:()=>{},34904:()=>{},6918:()=>{},84819:()=>{},23197:()=>{},60996:()=>{}}]);