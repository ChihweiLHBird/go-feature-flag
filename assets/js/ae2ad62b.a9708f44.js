(self.webpackChunkdocs_v_2=self.webpackChunkdocs_v_2||[]).push([[82992],{15199:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>Ze});var l=t(67294),r=t(87536),n=t(75902),i=t(52263);const s="flagContainer_wy3i";var c=t(87462),o=t(86010);const m="editorInputContainer_jqCm",d="editorCut_Erbg",u="editorPlaceholder_MvV8",v="editorInput_WHYK",p="errorMessage_K08I";var g=t(32866),f=t(45697),E=t.n(f);function b(e){let{label:a,displayText:t,className:n,required:i,type:s,validation:p,defaultValue:f,disablePlaceholder:E=!1,disableInlineErr:b=!1}=e;const{register:y}=(0,r.Gc)();return l.createElement("div",{className:(0,o.Z)(n||m)},l.createElement("input",(0,c.Z)({id:`${a}.input`,defaultValue:f,className:v,type:"number"===s?"number":"text",placeholder:" "},y(a,{required:{value:i,message:"This field is required"},...p}))),E&&l.createElement("span",null,t),l.createElement("div",{className:d}),l.createElement("label",{htmlFor:`${a}.input`,className:(0,o.Z)(u)},t),!b&&l.createElement(g.B,{name:a,render:N}))}function N(e){let{message:a}=e;return l.createElement("div",{className:p},a)}b.propTypes={label:E().string.isRequired,displayText:E().string,className:E().string,required:E().bool,type:E().string,validation:E().object,defaultValue:E().any,disablePlaceholder:E().bool,disableInlineErr:E().bool};const y="container_JzDm",h="switch_G9oQ",_="r_b74C",$="layer_jPCr",k="knobs_MQYY",q="checkbox_UUwg",x="displayText_acVt";function T(e){let{label:a,displayText:t,defaultChecked:n=!1}=e;const{register:i}=(0,r.Gc)();return l.createElement("div",{className:y},l.createElement("div",{className:(0,o.Z)(x)},t),l.createElement("div",null,l.createElement("div",{className:(0,o.Z)(h,_)},l.createElement("input",(0,c.Z)({type:"checkbox",className:q},i(a),{defaultChecked:n})),l.createElement("div",{className:k}),l.createElement("div",{className:$}))))}T.propTypes={label:E().string.isRequired,displayText:E().string,defaultChecked:E().bool};const V="selector_zSAl";function w(e){let{title:a,content:t,label:n,required:i}=e;const{register:s}=(0,r.Gc)();return l.createElement("div",{className:V},l.createElement("select",(0,c.Z)({defaultValue:"0"},s(n,i)),l.createElement("option",{disabled:!0,defaultChecked:!0,value:null},a),t.map(((e,a)=>l.createElement("option",{value:e.value,key:`variation_type_${e.value}_${e.displayText}`},e.displayName)))))}w.propTypes={title:E().string,content:E().array,label:E().string.isRequired,required:E().bool};const Z="buttonPlus_vxig",R="bg_ZMMU",D="variation_m8Hn",C="icons_NekN",S="icon_PBCB";var F=t(1372),M=t(92949);const P="container_SLwd";function G(e){let{label:a}=e;const{register:t}=(0,r.Gc)(),{colorMode:n}=(0,M.I)(),{onChange:i,onBlur:s,name:c,ref:o}=t(`${a}.value`);return l.createElement("div",{className:P,"data-color-mode":n},l.createElement(F.Z,{value:"",language:"json",placeholder:" Please enter JSON.",padding:7,className:P,onChange:i,onBlur:s,name:c,ref:o,style:{fontFamily:"ui-monospace,SFMono-Regular,SF Mono,Consolas,Liberation Mono,Menlo,monospace"}}))}G.propTypes={label:E().string.isRequired};const O=["\ud83d\udfe2","\ud83d\udfe0","\ud83d\udd34","\ud83d\udfe3","\u26aa\ufe0f","\ud83d\udd35","\u26ab\ufe0f","\ud83d\udfe1","\ud83d\udfe4"];function j(e){let{type:a,label:t}=e;const{control:n}=(0,r.Gc)(),{fields:i,append:s,remove:c}=(0,r.Dq)({control:n,name:t,rules:{minLength:1}});function m(e){let{index:a}=e;c(a)}return l.createElement("div",null,l.createElement("h2",null,"Variations"),l.createElement("div",{className:"grid grid-pad"},i.map(((e,r)=>l.createElement(A,{type:a,key:e.id,label:`${t}.${r}`,index:r,remove:m,icon:O[r%O.length]})))),l.createElement("button",{className:Z,onMouseDown:()=>s({})},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,o.Z)("fa-solid fa-circle fa-stack-2x",R)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"}))))}function A(e){let{type:a,label:t,remove:n,index:i,icon:s}=e;const{register:c}=(0,r.Gc)();return l.createElement("div",{className:D},l.createElement("div",{className:(0,o.Z)("col-4-12 mobile-col-5-12",C)},l.createElement("div",{className:S},s),l.createElement(b,{displayText:"Name",label:`${t}.name`,register:c,required:!0})),l.createElement("div",{className:(0,o.Z)("col-6-12 mobile-col-7-12")},((e,a,t)=>e&&"JSON"===e.toUpperCase()?l.createElement(G,{register:t,required:!0,label:a}):l.createElement(b,{displayText:"Flag Value",label:a,register:t,type:e,required:!0}))(a,t+".value",c)),l.createElement("div",{className:"col-1-12 mobile-col-1-12"},l.createElement("button",{className:Z,onMouseDown:e=>{e.preventDefault(),n(i)}},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,o.Z)("fa-solid fa-circle fa-stack-2x",R)}),l.createElement("i",{className:"fa-solid fa-minus fa-stack-1x fa-inverse"})))))}j.propTypes={type:E().string,label:E().string.isRequired},A.propTypes={type:E().string,label:E().string.isRequired,remove:E().func.isRequired,index:E().number.isRequired,icon:E().string};const I="ruleContainer__VKe",J="ruleName_UKzC",L="circle_Gmme",B="inputQuery_ajTA",z="ifContainer_dti2",K="serveTitle_zpaJ",Q="serve_AhaS",U="percentageInput_tEMG",Y="dateInput_aE4X",H="percentageContainer_Mre8",W="error_izBb",X="rolloutDesc_kHMj",ee="progressiveRollout_x7nm",ae="progressiveRolloutPercentage_qZik",te="formError_TtL5";var le=t(39960),re=(t(61061),t(53588)),ne=t(92305);function ie(e){let{variations:a,label:t,selectedVar:n=""}=e;const{register:i,watch:s}=(0,r.Gc)();return"percentage"!==n?null:l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:(0,o.Z)("col-1-1",X)},"A percentage rollout means that your users are divided in different buckets and you serve different variations to them. Note that a user will always have the same variation."),l.createElement("div",{className:"col-1-2"},l.createElement("ul",{className:H},a.map(((e,a)=>l.createElement("li",{key:`${t}.${e.name}`},l.createElement(b,{label:`${t}.${a}.value`,required:!0,defaultValue:0,type:"number",displayText:`%  ${O[a%O.length]} ${e.name}`,className:U,disablePlaceholder:!0,disableInlineErr:!0,validation:{valueAsNumber:!0,required:{value:!0,message:"Percentage field is required"},min:{value:0,message:"Percentage should be between 0 and 100"},max:{value:100,message:"Percentage should be between 0 and 100"}}}),l.createElement("input",(0,c.Z)({type:"hidden"},i(`${t}.${a}.name`),{value:e.name})))))),l.createElement(se,{percentages:s(t)})))}function se(e){let{percentages:a}=e;if(!a||!(0,re.isArray)(a)||a.length<=0)return null;const t=a.filter((e=>e&&!isNaN(e.value))).reduce(((e,a)=>e+a.value),0);return t>100?l.createElement("div",{className:W},"The total percentage cannot be more than 100%"):l.createElement(ne.Progress,{percent:t})}ie.propTypes={variations:E().array,label:E().string.isRequired,selectedVar:E().string},se.propTypes={percentages:E().array};var ce=t(96486),oe=t.n(ce),me=t(9198),de=t.n(me);function ue(e){let{name:a,initialValue:t,label:n,variations:i,defaultDate:s}=e;const{register:c,control:m,formState:{errors:d}}=(0,r.Gc)();return l.createElement("div",null,l.createElement("div",{className:(0,o.Z)("grid",ee)},l.createElement("div",null,a),l.createElement("div",null,l.createElement(r.Qr,{control:m,name:`${n}.date`,defaultValue:s,rules:{required:{value:!0,message:"Date field is required"}},render:e=>{let{field:a}=e;return l.createElement(de(),{className:Y,placeholderText:"Select date",showTimeSelect:!0,onChange:e=>a.onChange(e),selected:a.value,dateFormat:"Pp"})}})),l.createElement("div",null,"and serve"),l.createElement("div",null,l.createElement(w,{title:"Variation",content:i.map(((e,a)=>({value:e.name,displayName:`${O[a%O.length]} ${e.name}`}))).filter((e=>void 0!==e.value&&""!==e.value))||[],register:c,label:`${n}.selectedVar`,required:!0})),l.createElement("div",{className:ae},"to\xa0",l.createElement(b,{label:`${n}.percentage`,required:!0,defaultValue:t,type:"number",displayText:"%",className:U,disablePlaceholder:!0,disableInlineErr:!0,validation:{valueAsNumber:!0,min:{value:0,message:"Percentage should be between 0 and 100"},max:{value:100,message:"Percentage should be between 0 and 100"}}})),l.createElement("div",null,l.createElement(le.Z,{to:"/docs/configure_flag/rollout/progressive",target:"_blank"},l.createElement("i",{className:"fa-regular fa-circle-question"})))),l.createElement("div",null,l.createElement(ve,{errors:d,label:n})))}function ve(e,a){const t=oe().get(e,a);return oe().isNil(t)?null:l.createElement("ul",{className:te},Object.keys(t).map((e=>l.createElement("li",{key:e},t[e].message))))}function pe(e){let{variations:a,label:t,selectedVar:r}=e;if("progressive"!==r)return null;let n=new Date;return n=n.setDate(n.getDate()+10),l.createElement("div",{className:"grid grid-pad"},l.createElement("div",{className:(0,o.Z)("col-1-1",X)},"A progressive rollout allows you to increase the percentage of your flag over time.",l.createElement("br",null),"You can select a release ramp where the percentage of your flag will increase progressively between the start date and the end date."),l.createElement(ue,{name:"Start on the",label:`${t}.initial`,variations:a,initialValue:0,defaultDate:new Date}),l.createElement(ue,{name:"Stop on the",label:`${t}.end`,variations:a,initialValue:100,defaultDate:new Date(n)}))}function ge(e){let{variations:a,label:t,isDefaultRule:n}=e;const{register:i,watch:s}=(0,r.Gc)(),c=[{value:"percentage",displayName:"\ufe0f\u2197\ufe0f a percentage rollout"},{value:"progressive",displayName:"\u2197\ufe0f a progressive rollout"}];return l.createElement("div",{className:(0,o.Z)("grid-pad grid",I)},!n&&l.createElement("div",{className:"col-1-1"},l.createElement("div",{className:"content"},l.createElement(b,{label:`${t}.name`,displayText:"Rule name",className:(0,o.Z)(m,J),required:!0}))),!n&&l.createElement("div",{className:(0,o.Z)("grid")},l.createElement("div",{className:"col-9-12"},l.createElement("div",{className:(0,o.Z)("content",B)},l.createElement("div",{className:z},l.createElement("div",{className:(0,o.Z)(L)},"IF")),l.createElement(b,{label:`${t}.query`,displayText:"Query",required:!0}),l.createElement(le.Z,{to:"/docs/configure_flag/rule_format",target:"_blank"},l.createElement("i",{className:"fa-regular fa-circle-question"}))))),l.createElement("div",{className:"col-5-12"},l.createElement("div",{className:(0,o.Z)("content",Q)},l.createElement("div",{className:K},"Serve"),l.createElement(w,{title:"Variation",content:function(e){const a=function(e){return e.map(((e,a)=>({value:e.name,displayName:`${O[a%O.length]} ${e.name}`}))).filter((e=>void 0!==e.value&&""!==e.value))||[]}(e);return a.length>=2?[...a,...c]:a}(a),register:i,label:`${t}.selectedVar`,required:!0}))),l.createElement("div",{className:"col-1-1"},l.createElement(ie,{selectedVar:s(`${t}.selectedVar`),variations:a,label:`${t}.percentages`}),l.createElement(pe,{selectedVar:s(`${t}.selectedVar`),variations:a,label:`${t}.progressive`})))}ue.propTypes={name:E().string,initialValue:E().number,label:E().string.isRequired,variations:E().array,defaultDate:E().any},pe.propTypes={variations:E().array,label:E().string.isRequired,selectedVar:E().string},ge.propTypes={variations:E().array,label:E().string.isRequired,isDefaultRule:E().bool};const fe="button_Kroe",Ee="bg_rAJd",be="targeting_TgyP";function Ne(e){let{label:a,variations:t}=e;const{control:n}=(0,r.Gc)(),{fields:i,append:s,remove:c}=(0,r.Dq)({control:n,name:a}),m=e=>c(e);return l.createElement("div",null,l.createElement("h2",null,"Target specific users"),i.length<=0&&l.createElement("div",null,"Add Rule"),i.map(((e,r)=>l.createElement("div",{key:e.id,className:(0,o.Z)(be)},l.createElement(ge,{variations:t,label:`${a}.${r}`,isDefaultRule:!1}),l.createElement("button",{className:fe,onMouseDown:m},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,o.Z)("fa-solid fa-circle fa-stack-2x",Ee)}),l.createElement("i",{className:"fa-solid fa-xmark fa-stack-1x fa-inverse"})))))),l.createElement("button",{className:fe,onMouseDown:()=>s({name:`Rule ${i.length+1}`})},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,o.Z)("fa-solid fa-circle fa-stack-2x",Ee)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"}))))}function ye(e){let{label:a}=e;const{watch:t}=(0,r.Gc)();return l.createElement("div",{className:s},l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:"col-6-12 mobile-col-1-2"},l.createElement(b,{displayText:"Flag Name",label:`${a}.flagName`,required:!0})),l.createElement("div",{className:"col-3-12 mobile-col-1-2"},l.createElement(T,{id:"disable",label:`${a}.disable`,displayText:"Disable"})),l.createElement("div",{className:"col-3-12 mobile-col-1-2"},l.createElement(T,{id:"disable",label:`${a}.trackEvents`,displayText:"Track event",defaultChecked:!0}))),l.createElement("div",{className:"grid-pad grid"},l.createElement("div",{className:(0,o.Z)("col-3-12 mobile-col-1-2")},l.createElement(w,{title:"Flag type",content:[{value:"boolean",displayName:"\u2611\ufe0f boolean"},{value:"string",displayName:"\ud83d\udd24 string"},{value:"number",displayName:"\ud83d\udd22 number"},{value:"json",displayName:"\ud83d\udda5 JSON"}],label:`${a}.type`,required:!0})),l.createElement("div",{className:(0,o.Z)("col-1-12","mobile-col-1-1")}),l.createElement("div",{className:"col-2-12 mobile-col-1-2"},l.createElement(b,{id:"version",label:`${a}.version`,displayText:"Version"}))),l.createElement(j,{label:`${a}.variations`,type:t(`${a}.type`)}),l.createElement(Ne,{label:`${a}.targeting`,variations:t(`${a}.variations`)}),l.createElement("div",null,l.createElement("h2",null,"Default"),l.createElement(ge,{label:`${a}.defaultRule`,variations:t(`${a}.variations`),isDefaultRule:!0})))}Ne.propTypes={label:E().string.isRequired,variations:E().array},ye.propTypes={label:E().string.isRequired};var he=t(53951),_e=t(38388),$e=t(5022);const ke="invalidForm_J4Lp",qe="space_Hu3V";function xe(e){function a(e,a){switch(a){case"json":try{return JSON.parse(e.value)}catch(t){return}case"number":return Number(e)||void 0;case"boolean":return"boolean"==typeof e?e:void 0!==e&&("string"==typeof e||e instanceof String)&&"true"===e.toLowerCase();default:return String(e)||void 0}}function t(e){let a,t,l;const{selectedVar:r}=e;switch(r){case"percentage":t={},e.percentages.forEach((e=>t[e.name]=e.value));break;case"progressive":l={initial:{variation:e.progressive.initial.selectedVar,percentage:e.progressive.initial.percentage||0,date:e.progressive.initial.date},end:{variation:e.progressive.end.selectedVar,percentage:e.progressive.end.percentage||100,date:e.progressive.end.date}};break;default:a=r}return{name:e.name||void 0,query:e.query,variation:a,percentage:t,progressiveRollout:l}}const l={};return e.GOFeatureFlagEditor.filter((e=>void 0!==e.flagName&&""!==e.flagName)).forEach((e=>l[e.flagName]=function(e){const l=e.type,r={};e.variations.filter((e=>void 0!==e.name&&""!==e.name&&void 0!==e.value&&""!==e.value)).forEach((e=>r[e.name]=a(e.value,l)));const n=e.targeting.map((e=>t(e))),i=a(e.trackEvents,"boolean"),s=a(e.disable,"boolean"),c=t(e.defaultRule);return{variations:r,disable:s||void 0,trackEvents:i?void 0:i,version:""===e.version?void 0:e.version,targeting:n.length>0?n:void 0,defaultRule:c}}(e))),l}function Te(){return l.createElement("div",{className:ke},"Error in your configuration, please review the form.")}function Ve(){const{watch:e,formState:{errors:a}}=(0,r.Gc)(),t=e(),n=a&&0===Object.keys(a).length&&Object.getPrototypeOf(a)===Object.prototype;return l.createElement("div",{className:"col-4-12"},!n&&l.createElement(Te,null),n&&l.createElement(w,{title:"Format",content:[{value:"yaml",displayName:"YAML"},{value:"json",displayName:"JSON"},{value:"toml",displayName:"TOML"}],required:!1,label:"flagFormat"}),l.createElement("div",{className:qe}),n&&l.createElement(he.default,{className:"JSON"},function(e,a){switch(a){case"json":return JSON.stringify(e,null,2);case"toml":return $e.stringify(e);default:return _e.default.stringify(e,null,2)}}(xe(t),t.flagFormat)))}function we(){const e="GOFeatureFlagEditor",a=(0,r.cI)({mode:"onChange",defaultValues:{GOFeatureFlagEditor:[{flagName:"my-first-flag",variations:[{name:"Variation_1",value:!0},{name:"Variation_2",value:!1}],targeting:[],defaultRule:{}}]}}),{fields:t,append:n}=(0,r.Dq)({control:a.control,name:e,rules:{minLength:1}});return l.createElement("div",{className:"grid-pad grid"},l.createElement(r.RV,a,l.createElement("div",{className:"col-8-12"},l.createElement("form",{onSubmit:a.handleSubmit((e=>{e.preventDefault()}))},t.map(((a,t)=>l.createElement(ye,{label:`${e}.${t}`,key:a.id}))),l.createElement("button",{className:fe,onClick:e=>{e.preventDefault(),n({flagName:`new-flag-${t.length}`,variations:[{name:"Variation_1",value:!0},{name:"Variation_2",value:!1}],targeting:[],defaultRule:{}})}},l.createElement("span",{className:"fa-stack fa-1x"},l.createElement("i",{className:(0,o.Z)("fa-solid fa-circle fa-stack-2x",Ee)}),l.createElement("i",{className:"fa-solid fa-plus fa-stack-1x fa-inverse"})),"Add another flag"))),l.createElement(Ve,null)))}function Ze(){const{siteConfig:e}=(0,i.Z)();return l.createElement(n.Z,{title:`${e.title}`,description:"Description will go into a meta tag in <head />"},l.createElement(we,null))}},15101:()=>{},42116:()=>{},34904:()=>{},6918:()=>{},84819:()=>{},23197:()=>{},60996:()=>{}}]);