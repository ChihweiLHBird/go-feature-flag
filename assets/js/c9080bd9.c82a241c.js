"use strict";(self.webpackChunkdocs_v_2=self.webpackChunkdocs_v_2||[]).push([[94118],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=a.createContext({}),p=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},h="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=p(r),d=n,m=h["".concat(c,".").concat(d)]||h[d]||s[d]||o;return r?a.createElement(m,i(i({ref:t},u),{},{components:r})):a.createElement(m,i({ref:t},u))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[h]="string"==typeof e?e:n,i[1]=l;for(var p=2;p<o;p++)i[p]=r[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},86681:(e,t,r)=>{r.r(t),r.d(t,{contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var a=r(87462),n=(r(67294),r(3905));const o={title:"Provider Cache Specification"},i="Specification Document for OpenFeature Providers Cache",l={type:"mdx",permalink:"/specification/provider-cache",source:"@site/src/pages/specification/provider-cache.md",title:"Provider Cache Specification",description:"|                      |                 |",frontMatter:{title:"Provider Cache Specification"}},c=[{value:"Overview",id:"overview",level:2},{value:"Requirements",id:"requirements",level:2}],p={toc:c},u="wrapper";function h(e){let{components:t,...r}=e;return(0,n.kt)(u,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"specification-document-for-openfeature-providers-cache"},"Specification Document for OpenFeature Providers Cache"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null}),(0,n.kt)("th",{parentName:"tr",align:null}))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Creation Date")),(0,n.kt)("td",{parentName:"tr",align:null},"06/04/2023")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Last Update Date")),(0,n.kt)("td",{parentName:"tr",align:null},"06/04/2023")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("strong",{parentName:"td"},"Authors")),(0,n.kt)("td",{parentName:"tr",align:null},"Thomas Poignant")))),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"OpenFeature Providers are used to call the GO Feature Flag the relay proxy to evaluate flags.\nThe purpose of this specification document is to outline the requirements for implementing the cache policy in the\nproviders that is compatible with GO Feature Flag."),(0,n.kt)("h2",{id:"requirements"},"Requirements"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"The provider should implement an LRU cache with a configurable size and TTL."),(0,n.kt)("li",{parentName:"ol"},"The cache size and TTL should be configurable by the user of the provider."),(0,n.kt)("li",{parentName:"ol"},"The cache should be activated by default, but it should be possible to deactivate it in the configuration."),(0,n.kt)("li",{parentName:"ol"},"The cache key should be a combination of the flag name and user key."),(0,n.kt)("li",{parentName:"ol"},"When a flag is evaluated, the provider should first check the cache for the result before querying the relay proxy."),(0,n.kt)("li",{parentName:"ol"},"When there is no entry in the cache, we should query the relay proxy and update the cache with this entry."),(0,n.kt)("li",{parentName:"ol"},"When we have reached the max time for a cache entry, it should not be possible to retrieve it."),(0,n.kt)("li",{parentName:"ol"},"When we have reached the max size of the cache we should remove the oldest entry."),(0,n.kt)("li",{parentName:"ol"},"We should collect all the flags usage and call the API ",(0,n.kt)("inlineCode",{parentName:"li"},"/v1/data/collector")," for statistics reason."),(0,n.kt)("li",{parentName:"ol"},"The data collection should be activated by default, but it should be possible to deactivate it in the configuration."),(0,n.kt)("li",{parentName:"ol"},"We should not call the relay proxy API ",(0,n.kt)("inlineCode",{parentName:"li"},"/v1/data/collector")," for every evaluation, but call it in bulk with a periodic threshold."),(0,n.kt)("li",{parentName:"ol"},"The threshold should be configurable by the user of the provider.")))}h.isMDXComponent=!0}}]);